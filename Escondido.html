<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PanaderÃ­a Arjona</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos generales */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #f5f5f5;
            --secondary-color: #2c3e50;
            --accent-color: #d4af37;
            --light-gray: #f8f9fa;
            --medium-gray: #e9ecef;
            --dark-gray: #495057;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --modal-overlay: rgba(0, 0, 0, 0.9);
        }

        body {
            background-color: var(--primary-color);
            color: #333;
            line-height: 1.6;
            padding-bottom: 50px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--secondary-color) 0%, #1a252f 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .logo {
            width: 70px;
            height: 70px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 3px solid white;
            flex-shrink: 0;
        }

        .logo i {
            font-size: 35px;
            color: var(--secondary-color);
        }

        .header-content {
            text-align: center;
            flex: 1;
            min-width: 250px;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
            letter-spacing: 1px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .tagline {
            font-size: 1.1rem;
            color: var(--accent-color);
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        /* SecciÃ³n principal */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-top: 30px;
        }

        .form-section, .gallery-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--medium-gray);
        }

        /* Estilos del formulario */
        .form-section h2, .gallery-section h2, .admin-section h2 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent-color);
            font-size: 1.6rem;
            display: flex;
            align-items: center;
        }

        .form-section h2 i, .gallery-section h2 i, .admin-section h2 i {
            margin-right: 12px;
            color: var(--accent-color);
            font-size: 1.4rem;
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
            font-size: 0.95rem;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
        }

        .radio-group {
            display: flex;
            gap: 15px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
        }

        .radio-option input {
            width: auto;
            margin-right: 6px;
        }

        .hidden {
            display: none !important;
        }

        .delivery-cost {
            background-color: rgba(212, 175, 55, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            font-weight: 600;
            color: var(--secondary-color);
            border-left: 4px solid var(--accent-color);
            font-size: 0.95rem;
        }

        .product-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: var(--light-gray);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--secondary-color);
            flex-wrap: wrap;
        }

        .product-info {
            flex: 1;
            min-width: 200px;
            margin-bottom: 10px;
        }

        .product-name {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 5px;
        }

        .product-price {
            font-weight: 700;
            color: var(--accent-color);
            font-size: 1rem;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-selector button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background-color: var(--secondary-color);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .quantity-selector button:hover {
            background-color: var(--accent-color);
        }

        .quantity-selector input {
            width: 60px;
            text-align: center;
            flex-shrink: 0;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .time-slot {
            padding: 12px 5px;
            text-align: center;
            background-color: var(--light-gray);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            font-size: 0.9rem;
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .time-slot:hover {
            background-color: var(--medium-gray);
        }

        .time-slot.selected {
            background-color: rgba(40, 167, 69, 0.2);
            border-color: var(--success-color);
            color: var(--success-color);
            font-weight: 600;
        }

        .time-slot.unavailable {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--dark-gray);
            cursor: not-allowed;
            text-decoration: line-through;
        }

        .payment-info {
            background-color: rgba(40, 167, 69, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid var(--success-color);
            font-size: 0.95rem;
        }

        .schedule-info {
            background-color: rgba(13, 110, 253, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            text-align: center;
            border: 1px solid rgba(13, 110, 253, 0.2);
        }

        .schedule-info h3 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .schedule-info p {
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .whatsapp-contact {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(37, 211, 102, 0.1);
            border-radius: 10px;
        }

        .whatsapp-contact p {
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .whatsapp-contact a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            background-color: #25D366;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s;
            font-size: 1rem;
        }

        .whatsapp-contact a:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-contact i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .btn-submit {
            width: 100%;
            padding: 18px;
            background: linear-gradient(to right, var(--secondary-color), #1a252f);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-submit:hover {
            background: linear-gradient(to right, var(--accent-color), #c19b2e);
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1);
        }

        .btn-submit:active {
            transform: translateY(-1px);
        }

        /* GalerÃ­a */
        .gallery-toggle {
            width: 100%;
            padding: 15px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gallery-toggle:hover {
            background-color: #1a252f;
        }

        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-item {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            background-color: white;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: translateY(-10px);
        }

        .gallery-img {
            height: 220px; /* Aumentado el tamaÃ±o de las imÃ¡genes */
            width: 100%;
            object-fit: cover;
            border-bottom: 1px solid var(--medium-gray);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gallery-img:hover {
            transform: scale(1.05);
        }

        .gallery-info {
            padding: 15px;
        }

        .gallery-info h3 {
            color: var(--secondary-color);
            margin-bottom: 8px;
            font-size: 1.2rem;
        }

        .gallery-price {
            font-weight: 700;
            color: var(--accent-color);
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        /* Modal para imagen grande - MEJORADO */
        .image-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--modal-overlay);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .image-modal {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .image-modal-content {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            animation: zoomIn 0.3s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .close-image-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--danger-color);
            color: white;
            border: none;
            font-size: 1.8rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2001;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-weight: bold;
        }

        .close-image-modal:hover {
            background-color: #c82333;
            transform: scale(1.1) rotate(90deg);
        }

        .image-modal-title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            text-align: center;
            z-index: 2001;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 8px 20px;
            border-radius: 25px;
        }

        /* SecciÃ³n de administraciÃ³n */
        .admin-access {
            margin: 40px 0;
            text-align: center;
        }

        .admin-btn {
            padding: 15px 30px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .admin-btn:hover {
            background-color: #1a252f;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .admin-section {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--medium-gray);
            margin-top: 40px;
        }

        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .admin-panel {
            display: none;
        }

        .admin-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .admin-controls button {
            padding: 10px 15px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            flex: 1;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-ready {
            background-color: var(--warning-color);
            color: #333;
        }

        .btn-delivered {
            background-color: var(--success-color);
            color: white;
        }

        .btn-edit {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-delete {
            background-color: var(--danger-color);
            color: white;
        }

        .orders-container {
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid var(--medium-gray);
            border-radius: 10px;
            padding: 15px;
        }

        .order-card {
            background-color: var(--light-gray);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid var(--secondary-color);
            transition: all 0.3s;
            cursor: pointer;
        }

        .order-card:hover {
            background-color: #f0f0f0;
        }

        .order-card.selected {
            background-color: rgba(212, 175, 55, 0.1);
            border-color: var(--accent-color);
        }

        .order-card.ready {
            border-left-color: var(--warning-color);
        }

        .order-card.delivered {
            border-left-color: var(--success-color);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .order-id {
            font-weight: 700;
            color: var(--secondary-color);
            font-size: 1.1rem;
        }

        .order-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-pending {
            background-color: rgba(13, 110, 253, 0.2);
            color: #0d6efd;
        }

        .status-ready {
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .status-delivered {
            background-color: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }

        .order-details {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        .order-detail-item {
            background-color: white;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--medium-gray);
            font-size: 0.9rem;
        }

        .order-detail-item strong {
            color: var(--secondary-color);
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .order-products {
            margin-top: 15px;
        }

        .order-products h4 {
            margin-bottom: 10px;
            color: var(--secondary-color);
            font-size: 1.1rem;
        }

        .order-product-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed var(--medium-gray);
            font-size: 0.9rem;
        }

        .order-total {
            text-align: right;
            font-weight: 700;
            font-size: 1.2rem;
            margin-top: 15px;
            color: var(--secondary-color);
        }

        /* Modal de Edición */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .edit-modal {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent-color);
        }

        .modal-header h2 {
            color: var(--secondary-color);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--dark-gray);
            cursor: pointer;
            transition: color 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--danger-color);
            background-color: rgba(220, 53, 69, 0.1);
        }

        .modal-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .modal-section {
            background-color: var(--light-gray);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--medium-gray);
        }

        .modal-section h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-total {
            grid-column: 1 / -1;
            background-color: rgba(212, 175, 55, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid var(--accent-color);
            text-align: center;
            margin-top: 10px;
        }

        .modal-total h3 {
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        .total-amount-input {
            width: 100%;
            padding: 10px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            color: var(--accent-color);
            background-color: transparent;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            box-sizing: border-box;
        }

        .modal-actions {
            grid-column: 1 / -1;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--medium-gray);
        }

        .btn-cancel {
            padding: 12px 25px;
            background-color: var(--medium-gray);
            color: var(--dark-gray);
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-cancel:hover {
            background-color: #dee2e6;
        }

        .btn-save {
            padding: 12px 25px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-save:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }

        /* Notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 350px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success {
            background-color: var(--success-color);
        }

        .notification.error {
            background-color: var(--danger-color);
        }

        .notification.info {
            background-color: var(--secondary-color);
        }

        .notification.warning {
            background-color: var(--warning-color);
            color: #333;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid var(--medium-gray);
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }
            
            header {
                padding: 15px 0;
            }
            
            .logo {
                width: 60px;
                height: 60px;
                margin-right: 10px;
            }
            
            .logo i {
                font-size: 30px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .tagline {
                font-size: 1rem;
            }
            
            .main-content {
                margin-top: 20px;
                gap: 20px;
            }
            
            .form-section, .gallery-section, .admin-section {
                padding: 20px;
                border-radius: 12px;
            }
            
            .form-section h2, .gallery-section h2, .admin-section h2 {
                font-size: 1.4rem;
            }
            
            .product-option {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .product-info {
                width: 100%;
                margin-bottom: 15px;
            }
            
            .quantity-selector {
                width: 100%;
                justify-content: center;
            }
            
            .time-slots {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .time-slot {
                padding: 10px 5px;
                font-size: 0.85rem;
                min-height: 40px;
            }
            
            .gallery-container {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
            }
            
            .gallery-img {
                height: 180px; /* Ajuste para móviles */
            }
            
            .admin-controls button {
                min-width: 100px;
                padding: 10px;
                font-size: 0.85rem;
            }
            
            .order-details {
                grid-template-columns: 1fr;
            }
            
            .btn-submit, .admin-btn {
                padding: 15px;
                font-size: 1.1rem;
            }
            
            .modal-content {
                grid-template-columns: 1fr;
            }
            
            .edit-modal {
                padding: 20px;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .notification {
                max-width: 90%;
                left: 5%;
                right: 5%;
                top: 10px;
            }
            
            .close-image-modal {
                top: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 1.5rem;
            }
            
            .image-modal-title {
                font-size: 1.2rem;
                top: 15px;
                padding: 6px 15px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.6rem;
            }
            
            .form-section, .gallery-section, .admin-section {
                padding: 15px;
            }
            
            .time-slots {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .gallery-container {
                grid-template-columns: 1fr;
            }
            
            .gallery-img {
                height: 200px; /* Más grande en móviles pequeños */
            }
            
            .admin-controls {
                flex-direction: column;
            }
            
            .admin-controls button {
                width: 100%;
            }
            
            .order-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .order-status {
                margin-top: 5px;
            }
            
            .image-modal-overlay {
                padding: 10px;
            }
            
            .image-modal-content {
                max-width: 100%;
                max-height: 80%;
            }
            
            .close-image-modal {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1.3rem;
            }
            
            .image-modal-title {
                font-size: 1rem;
                top: 10px;
                padding: 5px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-bread-slice"></i>
                </div>
                <div class="header-content">
                    <h1>Panadería Arjona</h1>
                    <p class="tagline">Sabor tradicional con calidad excepcional</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Información de horarios -->
        <div class="schedule-info">
            <h3><i class="far fa-clock"></i> Nuestros Horarios</h3>
            <p>Lunes - Sábado: 7:00 AM - 10:00 PM</p>
            <p style="color: var(--accent-color); font-weight: 600;">Domingo no trabajamos</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">Si necesitas algo fuera de estos horarios, comunícate con nosotros:</p>
            <p style="font-weight: 600; margin-top: 5px;">+53 54546359 o +53 59561043</p>
        </div>

        <div class="main-content">
            <!-- Sección de formulario -->
            <section class="form-section">
                <h2><i class="fas fa-shopping-cart"></i> Realizar Pedido</h2>
                
                <form id="orderForm">
                    <div class="form-group">
                        <label for="customerName">Nombre (Obligatorio):</label>
                        <input type="text" id="customerName" placeholder="Ej: Juan Pérez">
                    </div>
                    
                    <div class="form-group">
                        <label>¿Desea domicilio?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="deliveryYes" name="delivery" value="yes">
                                <label for="deliveryYes" style="display: inline; margin-bottom: 0;">Sí</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="deliveryNo" name="delivery" value="no" checked>
                                <label for="deliveryNo" style="display: inline; margin-bottom: 0;">No, recogeré en tienda</label>
                            </div>
                        </div>
                    </div>
                    
                    <div id="deliverySection" class="hidden">
                        <div class="form-group">
                            <label for="deliveryAddress">Dirección de entrega:</label>
                            <textarea id="deliveryAddress" rows="3" placeholder="Ingrese su dirección completa"></textarea>
                        </div>
                        
                        <div class="delivery-cost">
                            <p id="deliveryCostText">Costo de domicilio: $100</p>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Teléfono (requerido):</label>
                        <input type="tel" id="phone" placeholder="+53 55555555" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Seleccione sus productos:</label>
                        
                        <div class="product-option">
                            <div class="product-info">
                                <div class="product-name">Mantecados</div>
                                <div class="product-price">30+ unidades: $25 c/u | Menos de 30: $35 c/u</div>
                            </div>
                            <div class="quantity-selector">
                                <button type="button" class="decrease" data-product="mantecados">-</button>
                                <input type="number" id="mantecados-qty" min="0" value="0" readonly>
                                <button type="button" class="increase" data-product="mantecados">+</button>
                            </div>
                        </div>
                        
                        <div class="product-option">
                            <div class="product-info">
                                <div class="product-name">Panesillos</div>
                                <div class="product-price">50+ unidades: $10 c/u | Menos de 50: $15 c/u</div>
                            </div>
                            <div class="quantity-selector">
                                <button type="button" class="decrease" data-product="panesillos">-</button>
                                <input type="number" id="panesillos-qty" min="0" value="0" readonly>
                                <button type="button" class="increase" data-product="panesillos">+</button>
                            </div>
                        </div>
                        
                        <div class="product-option">
                            <div class="product-info">
                                <div class="product-name">Panesillos Grandes</div>
                                <div class="product-price">25+ unidades: $20 c/u | Menos de 25: $25 c/u</div>
                            </div>
                            <div class="quantity-selector">
                                <button type="button" class="decrease" data-product="panesillos-grandes">-</button>
                                <input type="number" id="panesillos-grandes-qty" min="0" value="0" readonly>
                                <button type="button" class="increase" data-product="panesillos-grandes">+</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="orderDate">Fecha para recoger/entregar:</label>
                        <input type="date" id="orderDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Seleccione la hora:</label>
                        <div id="timeSlots" class="time-slots">
                            <!-- Las franjas horarias se generan con JavaScript -->
                        </div>
                        <p id="selectedTimeText" style="margin-top: 10px; font-weight: 600; color: var(--secondary-color);"></p>
                    </div>
                    
                    <div class="form-group">
                        <label>Forma de pago:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="cash" name="payment" value="cash" checked>
                                <label for="cash" style="display: inline; margin-bottom: 0;">Efectivo</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="transfer" name="payment" value="transfer">
                                <label for="transfer" style="display: inline; margin-bottom: 0;">Transferencia</label>
                            </div>
                        </div>
                        
                        <div id="transferInfo" class="payment-info hidden">
                            <p><i class="fas fa-info-circle"></i> <strong>Con transferencia se aplica un 10% adicional</strong> sobre el total de productos.</p>
                        </div>
                    </div>
                    
                    <div class="whatsapp-contact">
                        <p><i class="fas fa-question-circle"></i> ¿Tienes dudas? Escríbenos por WhatsApp:</p>
                        <a href="https://wa.me/5351136603" target="_blank">
                            <i class="fab fa-whatsapp"></i> +53 51136603
                        </a>
                    </div>
                    
                    <button type="submit" class="btn-submit">
                        <i class="fas fa-paper-plane"></i> Enviar Pedido
                    </button>
                </form>
            </section>

            <!-- Sección de galería -->
            <section class="gallery-section">
                <button class="gallery-toggle" id="galleryToggle">
                    <span>Ver Galería de Productos</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                
                <div id="galleryContainer" class="hidden">
                    <div class="gallery-container">
                        <div class="gallery-item">
                            <img src="imagenes/mantecados.jpg" alt="Mantecados" class="gallery-img" data-title="Mantecados">
                            <div class="gallery-info">
                                <h3>Mantecados</h3>
                                <p class="gallery-price">30+ unidades: $25 c/u | Menos de 30: $35 c/u</p>
                                <p>Deliciosos mantecados tradicionales, esponjosos y con el punto justo de dulce.</p>
                            </div>
                        </div>
                        
                        <div class="gallery-item">
                            <img src="imagenes/panecillos pequenos.jpg" alt="Panesillos Pequeños" class="gallery-img" data-title="Panesillos Pequeños">
                            <div class="gallery-info">
                                <h3>Panesillos Pequenos</h3>
                                <p class="gallery-price">50+ unidades: $10 c/u | Menos de 50: $15 c/u</p>
                                <p>Panecillos suaves y dorados, perfectos para cualquier momento del día.</p>
                            </div>
                        </div>
                        
                        <div class="gallery-item">
                            <img src="imagenes/panecillos grandes.jpg" alt="Panesillos Grandes" class="gallery-img" data-title="Panesillos Grandes">
                            <div class="gallery-info">
                                <h3>Panesillos Grandes</h3>
                                <p class="gallery-price">25+ unidades: $20 c/u | Menos de 25: $25 c/u</p>
                                <p>Nuestros panesillos en tamaño grande, ideales para compartir.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Acceso a administración -->
        <div class="admin-access">
            <button class="admin-btn" id="adminAccessBtn">
                <i class="fas fa-lock"></i> Acceso Administrador
            </button>
        </div>

        <!-- Sección de administración (oculta inicialmente) -->
        <section id="adminSection" class="admin-section hidden">
            <div id="loginForm" class="login-form">
                <h2><i class="fas fa-user-shield"></i> Acceso Administrador</h2>
                <div class="form-group">
                    <label for="adminPassword">Contraseña:</label>
                    <input type="password" id="adminPassword" placeholder="Ingrese la contraseña">
                </div>
                <button id="loginBtn" class="btn-submit">Ingresar</button>
            </div>
            
            <div id="adminPanel" class="admin-panel">
                <h2><i class="fas fa-tasks"></i> Panel de Administración</h2>
                
                <div class="admin-controls">
                    <div>
                        <button id="markReadyBtn" class="btn-ready">
                            <i class="fas fa-check"></i> Un Listo
                        </button>
                        <button id="markDeliveredBtn" class="btn-delivered">
                            <i class="fas fa-check-double"></i> Dos Listos
                        </button>
                        <button id="editOrderBtn" class="btn-edit">
                            <i class="fas fa-edit"></i> Editar Pedido
                        </button>
                        <button id="deleteOrderBtn" class="btn-delete">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </div>
                    <div>
                        <button id="refreshOrdersBtn" class="btn-submit" style="padding: 10px 20px;">
                            <i class="fas fa-sync-alt"></i> Actualizar
                        </button>
                    </div>
                </div>
                
                <div id="ordersContainer" class="orders-container">
                    <!-- Los pedidos se cargarán aquí dinámicamente -->
                </div>
            </div>
        </section>
    </div>

    <!-- Modal para imagen ampliada - MEJORADO -->
    <div id="imageModal" class="image-modal-overlay hidden">
        <div class="image-modal">
            <button class="close-image-modal" id="closeImageModal" title="Cerrar">&times;</button>
            <div class="image-modal-title" id="imageModalTitle"></div>
            <img id="expandedImage" src="" alt="Imagen ampliada" class="image-modal-content">
        </div>
    </div>

    <!-- Modal de Edición (oculto inicialmente) -->
    <div id="editModal" class="modal-overlay hidden">
        <div class="edit-modal">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Editar Pedido #<span id="editOrderId"></span></h2>
                <button class="close-modal" id="closeEditModal">&times;</button>
            </div>
            
            <div class="modal-content">
                <div class="modal-section">
                    <h3><i class="fas fa-user"></i> Información del Cliente</h3>
                    <div class="form-group">
                        <label for="editCustomerName">Nombre:</label>
                        <input type="text" id="editCustomerName" placeholder="Nombre del cliente">
                    </div>
                    <div class="form-group">
                        <label for="editPhone">Teléfono:</label>
                        <input type="tel" id="editPhone" placeholder="+53 55555555">
                    </div>
                </div>
                
                <div class="modal-section">
                    <h3><i class="fas fa-truck"></i> Entrega</h3>
                    <div class="form-group">
                        <label>¿Desea domicilio?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="editDeliveryYes" name="editDelivery" value="yes">
                                <label for="editDeliveryYes">Sí</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="editDeliveryNo" name="editDelivery" value="no" checked>
                                <label for="editDeliveryNo">No, recoger en tienda</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editDeliveryAddress">Dirección:</label>
                        <textarea id="editDeliveryAddress" rows="2" placeholder="Dirección de entrega"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="editDeliveryCost">Costo de domicilio ($):</label>
                        <input type="number" id="editDeliveryCost" min="0" value="100">
                    </div>
                </div>
                
                <div class="modal-section">
                    <h3><i class="fas fa-shopping-basket"></i> Productos</h3>
                    <div class="form-group">
                        <label for="editMantecados">Mantecados:</label>
                        <input type="number" id="editMantecados" min="0" value="0">
                        <small>30+ unidades: $25 c/u | Menos de 30: $35 c/u</small>
                    </div>
                    <div class="form-group">
                        <label for="editPanesillos">Panesillos:</label>
                        <input type="number" id="editPanesillos" min="0" value="0">
                        <small>50+ unidades: $10 c/u | Menos de 50: $15 c/u</small>
                    </div>
                    <div class="form-group">
                        <label for="editPanesillosGrandes">Panesillos Grandes:</label>
                        <input type="number" id="editPanesillosGrandes" min="0" value="0">
                        <small>25+ unidades: $20 c/u | Menos de 25: $25 c/u</small>
                    </div>
                </div>
                
                <div class="modal-section">
                    <h3><i class="fas fa-calendar-alt"></i> Fecha y Hora</h3>
                    <div class="form-group">
                        <label for="editOrderDate">Fecha:</label>
                        <input type="date" id="editOrderDate">
                    </div>
                    <div class="form-group">
                        <label for="editOrderTime">Hora (HH:MM):</label>
                        <input type="text" id="editOrderTime" placeholder="Ej: 14:30">
                    </div>
                </div>
                
                <div class="modal-section">
                    <h3><i class="fas fa-money-bill-wave"></i> Pago</h3>
                    <div class="form-group">
                        <label>Forma de pago:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="editCash" name="editPayment" value="cash" checked>
                                <label for="editCash">Efectivo</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="editTransfer" name="editPayment" value="transfer">
                                <label for="editTransfer">Transferencia</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editStatus">Estado del pedido:</label>
                        <select id="editStatus">
                            <option value="pending">Pendiente</option>
                            <option value="ready">Listo (Un Listo)</option>
                            <option value="delivered">Entregado (Dos Listos)</option>
                            <option value="cancelled">Cancelado</option>
                        </select>
                    </div>
                </div>
                
                <div class="modal-total">
                    <h3><i class="fas fa-calculator"></i> Total</h3>
                    <input type="number" id="editTotalInput" class="total-amount-input" value="0">
                    <div style="margin-top: 10px; font-size: 0.9rem; color: var(--dark-gray);">
                        <p id="editCalculationDetails">Productos: $0 + Domicilio: $0 + Transferencia: $0</p>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-cancel" id="cancelEdit">Cancelar</button>
                    <button class="btn-save" id="saveEdit">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>Panadería Arjona &copy; <span id="currentYear"></span> | Todos los derechos reservados</p>
            <p>Diseñado para una gestión eficiente de pedidos</p>
        </div>
    </footer>

    <!-- Notificaciones -->
    <div id="notificationContainer"></div>

    <script>
        // Variables globales
        let orders = JSON.parse(localStorage.getItem('panaderiaArjonaOrders')) || [];
        let nextOrderId = parseInt(localStorage.getItem('panaderiaArjonaNextId')) || 1;
        let selectedOrderId = null;
        let bookedTimes = {};
        let adminPassword = "admin123";
        let editingOrder = null;
        
        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowFormatted = tomorrow.toISOString().split('T')[0];
            document.getElementById('orderDate').min = tomorrowFormatted;
            document.getElementById('editOrderDate').min = tomorrowFormatted;
            
            initializeEventListeners();
            generateTimeSlots();
            loadBookedTimes();
            
            showNotification('Bienvenido a Panadería Arjona. Realice su pedido con anticipación.', 'info');
        });
        
        // Inicializar todos los event listeners
        function initializeEventListeners() {
            // Toggle de domicilio
            document.querySelectorAll('input[name="delivery"]').forEach(radio => {
                radio.addEventListener('change', toggleDeliverySection);
            });
            
            // Toggle de galería
            document.getElementById('galleryToggle').addEventListener('click', toggleGallery);
            
            // Selector de cantidad de productos - CORREGIDO
            document.querySelectorAll('.increase').forEach(button => {
                button.addEventListener('click', increaseQuantity);
            });
            
            document.querySelectorAll('.decrease').forEach(button => {
                button.addEventListener('click', decreaseQuantity);
            });
            
            // Toggle de información de transferencia
            document.querySelectorAll('input[name="payment"]').forEach(radio => {
                radio.addEventListener('change', toggleTransferInfo);
            });
            
            // Cambio de fecha para regenerar horarios
            document.getElementById('orderDate').addEventListener('change', generateTimeSlots);
            
            // Envío del formulario
            document.getElementById('orderForm').addEventListener('submit', submitOrder);
            
            // Acceso al admin
            document.getElementById('adminAccessBtn').addEventListener('click', showAdminSection);
            document.getElementById('loginBtn').addEventListener('click', loginAdmin);
            
            // Botones del admin
            document.getElementById('refreshOrdersBtn').addEventListener('click', loadOrders);
            document.getElementById('markReadyBtn').addEventListener('click', markOrderReady);
            document.getElementById('markDeliveredBtn').addEventListener('click', markOrderDelivered);
            document.getElementById('editOrderBtn').addEventListener('click', openEditModal);
            document.getElementById('deleteOrderBtn').addEventListener('click', deleteOrder);
            
            // Establecer costo de domicilio aleatorio
            setRandomDeliveryCost();
            
            // Eventos del modal de edición
            document.getElementById('closeEditModal').addEventListener('click', closeEditModal);
            document.getElementById('cancelEdit').addEventListener('click', closeEditModal);
            document.getElementById('saveEdit').addEventListener('click', saveEditedOrder);
            
            // Eventos para recalcular total en modal
            document.getElementById('editMantecados').addEventListener('input', recalculateEditTotal);
            document.getElementById('editPanesillos').addEventListener('input', recalculateEditTotal);
            document.getElementById('editPanesillosGrandes').addEventListener('input', recalculateEditTotal);
            document.getElementById('editDeliveryCost').addEventListener('input', recalculateEditTotal);
            document.querySelectorAll('input[name="editPayment"]').forEach(radio => {
                radio.addEventListener('change', recalculateEditTotal);
            });
            document.querySelectorAll('input[name="editDelivery"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const deliveryCostInput = document.getElementById('editDeliveryCost');
                    if (this.value === 'yes') {
                        deliveryCostInput.disabled = false;
                        deliveryCostInput.value = deliveryCostInput.value || '100';
                    } else {
                        deliveryCostInput.disabled = true;
                        deliveryCostInput.value = '0';
                    }
                    recalculateEditTotal();
                });
            });
            
            // No actualizar automáticamente el total si el usuario está editando manualmente
            const editTotalInput = document.getElementById('editTotalInput');
            editTotalInput.addEventListener('focus', function() {
                this.dataset.manualEdit = 'true';
            });
            
            editTotalInput.addEventListener('blur', function() {
                if (this.value !== this.dataset.lastAutoValue) {
                    this.dataset.manualEdit = 'true';
                }
            });
            
            // Eventos para el modal de imagen ampliada
            document.getElementById('closeImageModal').addEventListener('click', closeImageModal);
            document.getElementById('imageModal').addEventListener('click', function(e) {
                if (e.target.id === 'imageModal' || e.target.classList.contains('image-modal')) {
                    closeImageModal();
                }
            });
            
            // Evento para cerrar con tecla Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && !document.getElementById('imageModal').classList.contains('hidden')) {
                    closeImageModal();
                }
            });
            
            // Eventos para abrir imágenes en grande - MEJORADO
            document.querySelectorAll('.gallery-img').forEach(img => {
                img.addEventListener('click', openImageModal);
            });
            
            // Agregar eventos también cuando se muestre la galería
            document.getElementById('galleryToggle').addEventListener('click', function() {
                setTimeout(() => {
                    document.querySelectorAll('.gallery-img').forEach(img => {
                        if (!img.hasAttribute('data-listener-added')) {
                            img.addEventListener('click', openImageModal);
                            img.setAttribute('data-listener-added', 'true');
                        }
                    });
                }, 100);
            });
        }
        
        // Abrir imagen en grande - MEJORADO
        function openImageModal(event) {
            const imgElement = event.target;
            const imgSrc = imgElement.src;
            const imgTitle = imgElement.getAttribute('data-title') || imgElement.alt;
            
            document.getElementById('expandedImage').src = imgSrc;
            document.getElementById('imageModalTitle').textContent = imgTitle;
            document.getElementById('imageModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Enfocar el botón de cerrar para mejor accesibilidad
            setTimeout(() => {
                document.getElementById('closeImageModal').focus();
            }, 100);
        }
        
        // Cerrar imagen en grande
        function closeImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // Generar costo de domicilio aleatorio (100 o 150)
        function setRandomDeliveryCost() {
            const deliveryCost = Math.random() < 0.5 ? 100 : 150;
            document.getElementById('deliveryCostText').textContent = `Costo de domicilio: $${deliveryCost}`;
        }
        
        // Mostrar/ocultar sección de domicilio
        function toggleDeliverySection() {
            const deliverySection = document.getElementById('deliverySection');
            const deliveryYes = document.getElementById('deliveryYes');
            
            if (deliveryYes.checked) {
                deliverySection.classList.remove('hidden');
                setRandomDeliveryCost();
            } else {
                deliverySection.classList.add('hidden');
            }
        }
        
        // Mostrar/ocultar galería
        function toggleGallery() {
            const galleryContainer = document.getElementById('galleryContainer');
            const toggleIcon = document.querySelector('#galleryToggle i');
            
            if (galleryContainer.classList.contains('hidden')) {
                galleryContainer.classList.remove('hidden');
                toggleIcon.classList.remove('fa-chevron-down');
                toggleIcon.classList.add('fa-chevron-up');
                document.querySelector('#galleryToggle span').textContent = 'Ocultar Galería de Productos';
            } else {
                galleryContainer.classList.add('hidden');
                toggleIcon.classList.remove('fa-chevron-up');
                toggleIcon.classList.add('fa-chevron-down');
                document.querySelector('#galleryToggle span').textContent = 'Ver Galería de Productos';
            }
        }
        
        // Aumentar cantidad de producto - FUNCIÓN CORREGIDA
        function increaseQuantity(event) {
            const product = event.target.dataset.product;
            // Usar el ID correcto manteniendo los guiones
            const inputId = `${product}-qty`;
            const input = document.getElementById(inputId);
            if (input) {
                input.value = parseInt(input.value) + 1;
            }
        }
        
        // Disminuir cantidad de producto - FUNCIÓN CORREGIDA
        function decreaseQuantity(event) {
            const product = event.target.dataset.product;
            // Usar el ID correcto manteniendo los guiones
            const inputId = `${product}-qty`;
            const input = document.getElementById(inputId);
            const currentValue = parseInt(input.value);
            
            if (currentValue > 0) {
                input.value = currentValue - 1;
            }
        }
        
        // Mostrar/ocultar información de transferencia
        function toggleTransferInfo() {
            const transferInfo = document.getElementById('transferInfo');
            const transferRadio = document.getElementById('transfer');
            
            if (transferRadio.checked) {
                transferInfo.classList.remove('hidden');
            } else {
                transferInfo.classList.add('hidden');
            }
        }
        
        // Generar franjas horarias
        function generateTimeSlots() {
            const timeSlotsContainer = document.getElementById('timeSlots');
            const selectedDate = document.getElementById('orderDate').value;
            
            if (!selectedDate) {
                timeSlotsContainer.innerHTML = '<p class="time-slot unavailable">Seleccione una fecha primero</p>';
                return;
            }
            
            timeSlotsContainer.innerHTML = '';
            
            const startHour = 7;
            const endHour = 21;
            const intervals = ['00', '30'];
            
            for (let hour = startHour; hour <= endHour; hour++) {
                for (let interval of intervals) {
                    if (hour === 21 && interval === '30') break;
                    
                    const timeString = `${hour.toString().padStart(2, '0')}:${interval}`;
                    const displayTime = `${hour > 12 ? hour - 12 : hour}:${interval} ${hour >= 12 ? 'PM' : 'AM'}`;
                    
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.dataset.time = timeString;
                    timeSlot.textContent = displayTime;
                    
                    const dateTimeKey = `${selectedDate}-${timeString}`;
                    if (bookedTimes[dateTimeKey]) {
                        timeSlot.classList.add('unavailable');
                        timeSlot.title = 'Este horario ya está reservado';
                    }
                    
                    timeSlot.addEventListener('click', function() {
                        if (!this.classList.contains('unavailable')) {
                            document.querySelectorAll('.time-slot').forEach(slot => {
                                slot.classList.remove('selected');
                            });
                            
                            this.classList.add('selected');
                            document.getElementById('selectedTimeText').textContent = `Hora seleccionada: ${displayTime}`;
                        }
                    });
                    
                    timeSlotsContainer.appendChild(timeSlot);
                }
            }
        }
        
        // Cargar tiempos reservados desde pedidos existentes
        function loadBookedTimes() {
            bookedTimes = {};
            
            orders.forEach(order => {
                if (order.status !== 'cancelled' && order.date && order.time) {
                    const dateTimeKey = `${order.date}-${order.time}`;
                    bookedTimes[dateTimeKey] = true;
                }
            });
        }
        
        // Enviar pedido
        function submitOrder(event) {
            event.preventDefault();
            
            const customerName = document.getElementById('customerName').value || 'Cliente no identificado';
            const wantsDelivery = document.getElementById('deliveryYes').checked;
            const deliveryAddress = wantsDelivery ? document.getElementById('deliveryAddress').value : '';
            const phone = document.getElementById('phone').value;
            const mantecadosQty = parseInt(document.getElementById('mantecados-qty').value);
            const panesillosQty = parseInt(document.getElementById('panesillos-qty').value);
            const panesillosGrandesQty = parseInt(document.getElementById('panesillos-grandes-qty').value);
            const orderDate = document.getElementById('orderDate').value;
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
            
            const selectedTimeSlot = document.querySelector('.time-slot.selected');
            if (!selectedTimeSlot) {
                showNotification('Por favor seleccione una hora para su pedido.', 'error');
                return;
            }
            
            const orderTime = selectedTimeSlot.dataset.time;
            
            if (mantecadosQty === 0 && panesillosQty === 0 && panesillosGrandesQty === 0) {
                showNotification('Por favor seleccione al menos un producto.', 'error');
                return;
            }
            
            // Calcular precios según cantidad (NUEVOS PRECIOS)
            let mantecadosPrice = mantecadosQty >= 30 ? 25 : 35;
            let panesillosPrice = panesillosQty >= 50 ? 10 : 15;
            let panesillosGrandesPrice = panesillosGrandesQty >= 25 ? 20 : 25;
            
            // Calcular subtotales
            const mantecadosSubtotal = mantecadosQty * mantecadosPrice;
            const panesillosSubtotal = panesillosQty * panesillosPrice;
            const panesillosGrandesSubtotal = panesillosGrandesQty * panesillosGrandesPrice;
            
            // Calcular total de productos
            let productsTotal = mantecadosSubtotal + panesillosSubtotal + panesillosGrandesSubtotal;
            
            // Aplicar CARGO ADICIONAL por transferencia (10% extra)
            let transferCharge = 0;
            if (paymentMethod === 'transfer') {
                transferCharge = productsTotal * 0.1;
            }
            
            // Calcular costo de domicilio
            let deliveryCost = 0;
            if (wantsDelivery) {
                const deliveryCostText = document.getElementById('deliveryCostText').textContent;
                deliveryCost = parseInt(deliveryCostText.match(/\$(\d+)/)[1]);
            }
            
            // Calcular total final (productos + cargo transferencia + domicilio)
            const total = productsTotal + transferCharge + deliveryCost;
            
            // Crear objeto de pedido
            const order = {
                id: nextOrderId++,
                customerName: customerName,
                phone: phone,
                wantsDelivery: wantsDelivery,
                deliveryAddress: deliveryAddress,
                deliveryCost: deliveryCost,
                products: {
                    mantecados: { quantity: mantecadosQty, price: mantecadosPrice, subtotal: mantecadosSubtotal },
                    panesillos: { quantity: panesillosQty, price: panesillosPrice, subtotal: panesillosSubtotal },
                    panesillosGrandes: { quantity: panesillosGrandesQty, price: panesillosGrandesPrice, subtotal: panesillosGrandesSubtotal }
                },
                productsTotal: productsTotal,
                transferCharge: transferCharge,
                total: total,
                date: orderDate,
                time: orderTime,
                paymentMethod: paymentMethod,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            orders.push(order);
            
            const dateTimeKey = `${orderDate}-${orderTime}`;
            bookedTimes[dateTimeKey] = true;
            
            saveOrders();
            
            showNotification(`Pedido #${order.id} realizado con éxito. Total: $${total}`, 'success');
            
            scheduleNotification(order);
            
            document.getElementById('orderForm').reset();
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.classList.remove('selected');
            });
            document.getElementById('selectedTimeText').textContent = '';
            document.getElementById('deliverySection').classList.add('hidden');
            document.getElementById('transferInfo').classList.add('hidden');
            document.getElementById('mantecados-qty').value = 0;
            document.getElementById('panesillos-qty').value = 0;
            document.getElementById('panesillos-grandes-qty').value = 0;
            
            generateTimeSlots();
        }
        
        // Programar notificación una hora antes del pedido
        function scheduleNotification(order) {
            const orderDate = new Date(`${order.date}T${order.time}:00`);
            const notificationTime = new Date(orderDate.getTime() - 60 * 60 * 1000);
            
            if (notificationTime > new Date()) {
                const timeUntilNotification = notificationTime.getTime() - new Date().getTime();
                
                setTimeout(() => {
                    showNotification(`Recordatorio: El pedido #${order.id} está programado para ${order.time} hoy.`, 'info');
                }, timeUntilNotification);
            }
        }
        
        // Mostrar sección de administración
        function showAdminSection() {
            document.getElementById('adminSection').classList.remove('hidden');
            document.getElementById('adminSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Iniciar sesión como administrador
        function loginAdmin() {
            const passwordInput = document.getElementById('adminPassword');
            const password = passwordInput.value;
            
            if (password === adminPassword) {
                document.getElementById('loginForm').style.display = 'none';
                
                const adminPanel = document.getElementById('adminPanel');
                adminPanel.style.display = 'block';
                
                passwordInput.value = '';
                
                loadOrders();
                
                showNotification('Sesión iniciada como administrador. Puedes gestionar los pedidos.', 'success');
            } else {
                showNotification('Contraseña incorrecta. Intenta con: admin123', 'error');
                passwordInput.value = '';
            }
        }
        
        // Cargar pedidos en el panel de administración
        function loadOrders() {
            const ordersContainer = document.getElementById('ordersContainer');
            
            if (orders.length === 0) {
                ordersContainer.innerHTML = '<div class="order-card"><p>No hay pedidos registrados.</p></div>';
                return;
            }
            
            const sortedOrders = [...orders].sort((a, b) => {
                const dateA = new Date(`${a.date}T${a.time}:00`);
                const dateB = new Date(`${b.date}T${b.time}:00`);
                return dateA - dateB;
            });
            
            ordersContainer.innerHTML = '';
            
            sortedOrders.forEach(order => {
                const orderDate = new Date(`${order.date}T${order.time}:00`);
                const formattedDate = orderDate.toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                const formattedTime = order.time;
                
                let statusClass = 'status-pending';
                let statusText = 'Pendiente';
                
                if (order.status === 'ready') {
                    statusClass = 'status-ready';
                    statusText = 'Listo';
                } else if (order.status === 'delivered') {
                    statusClass = 'status-delivered';
                    statusText = 'Entregado';
                } else if (order.status === 'cancelled') {
                    statusClass = 'status-cancelled';
                    statusText = 'Cancelado';
                }
                
                const orderCard = document.createElement('div');
                orderCard.className = `order-card ${order.status} ${selectedOrderId === order.id ? 'selected' : ''}`;
                orderCard.dataset.orderId = order.id;
                
                orderCard.innerHTML = `
                    <div class="order-header">
                        <div>
                            <span class="order-id">Pedido #${order.id}</span>
                            <span class="order-status ${statusClass}">${statusText}</span>
                        </div>
                        <div>
                            <input type="checkbox" class="order-checkbox" data-order-id="${order.id}" ${selectedOrderId === order.id ? 'checked' : ''}>
                        </div>
                    </div>
                    <div class="order-details">
                        <div class="order-detail-item">
                            <strong>Cliente:</strong>
                            ${order.customerName}
                        </div>
                        <div class="order-detail-item">
                            <strong>Teléfono:</strong>
                            ${order.phone}
                        </div>
                        <div class="order-detail-item">
                            <strong>Fecha y hora:</strong>
                            ${formattedDate}<br>
                            ${formattedTime}
                        </div>
                        <div class="order-detail-item">
                            <strong>Entrega:</strong>
                            ${order.wantsDelivery ? 'Domicilio' : 'Recoger en tienda'}
                            ${order.wantsDelivery ? `<br><strong>Dirección:</strong> ${order.deliveryAddress}` : ''}
                        </div>
                        <div class="order-detail-item">
                            <strong>Pago:</strong>
                            ${order.paymentMethod === 'cash' ? 'Efectivo' : 'Transferencia (+10%)'}
                        </div>
                        <div class="order-detail-item">
                            <strong>Estado:</strong>
                            ${statusText}
                        </div>
                    </div>
                    <div class="order-products">
                        <h4>Productos:</h4>
                        ${order.products.mantecados.quantity > 0 ? `
                        <div class="order-product-item">
                            <span>Mantecados (x${order.products.mantecados.quantity})</span>
                            <span>$${order.products.mantecados.subtotal}</span>
                        </div>
                        ` : ''}
                        ${order.products.panesillos.quantity > 0 ? `
                        <div class="order-product-item">
                            <span>Panesillos (x${order.products.panesillos.quantity})</span>
                            <span>$${order.products.panesillos.subtotal}</span>
                        </div>
                        ` : ''}
                        ${order.products.panesillosGrandes.quantity > 0 ? `
                        <div class="order-product-item">
                            <span>Panesillos Grandes (x${order.products.panesillosGrandes.quantity})</span>
                            <span>$${order.products.panesillosGrandes.subtotal}</span>
                        </div>
                        ` : ''}
                        ${order.deliveryCost > 0 ? `
                        <div class="order-product-item">
                            <span>Costo de domicilio</span>
                            <span>$${order.deliveryCost}</span>
                        </div>
                        ` : ''}
                        ${order.transferCharge > 0 ? `
                        <div class="order-product-item">
                            <span>Cargo por transferencia (10%)</span>
                            <span>+$${order.transferCharge}</span>
                        </div>
                        ` : ''}
                        <div class="order-product-item" style="border-bottom: none; font-weight: bold;">
                            <span>Subtotal productos</span>
                            <span>$${order.productsTotal}</span>
                        </div>
                    </div>
                    <div class="order-total">
                        Total: $${order.total}
                    </div>
                `;
                
                orderCard.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('order-checkbox')) {
                        const checkboxes = document.querySelectorAll('.order-checkbox');
                        checkboxes.forEach(cb => cb.checked = false);
                        
                        const checkbox = this.querySelector('.order-checkbox');
                        checkbox.checked = !checkbox.checked;
                        
                        if (checkbox.checked) {
                            selectedOrderId = order.id;
                            document.querySelectorAll('.order-card').forEach(card => {
                                card.classList.remove('selected');
                            });
                            this.classList.add('selected');
                        } else {
                            selectedOrderId = null;
                            this.classList.remove('selected');
                        }
                    }
                });
                
                const checkbox = orderCard.querySelector('.order-checkbox');
                checkbox.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    if (this.checked) {
                        selectedOrderId = order.id;
                        document.querySelectorAll('.order-card').forEach(card => {
                            card.classList.remove('selected');
                        });
                        orderCard.classList.add('selected');
                    } else {
                        selectedOrderId = null;
                        orderCard.classList.remove('selected');
                    }
                });
                
                ordersContainer.appendChild(orderCard);
            });
        }
        
        // Marcar pedido como listo
        function markOrderReady() {
            if (!selectedOrderId) {
                showNotification('Por favor seleccione un pedido.', 'warning');
                return;
            }
            
            const orderIndex = orders.findIndex(o => o.id === selectedOrderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = 'ready';
                saveOrders();
                loadOrders();
                showNotification(`Pedido #${selectedOrderId} marcado como listo (UN LISTO).`, 'success');
                selectedOrderId = null;
            }
        }
        
        // Marcar pedido como entregado
        function markOrderDelivered() {
            if (!selectedOrderId) {
                showNotification('Por favor seleccione un pedido.', 'warning');
                return;
            }
            
            const orderIndex = orders.findIndex(o => o.id === selectedOrderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = 'delivered';
                saveOrders();
                loadOrders();
                showNotification(`Pedido #${selectedOrderId} marcado como entregado (DOS LISTOS).`, 'success');
                selectedOrderId = null;
            }
        }
        
        // Abrir modal para editar pedido
        function openEditModal() {
            if (!selectedOrderId) {
                showNotification('Por favor seleccione un pedido para editar.', 'warning');
                return;
            }
            
            const orderIndex = orders.findIndex(o => o.id === selectedOrderId);
            
            if (orderIndex !== -1) {
                editingOrder = orders[orderIndex];
                
                document.getElementById('editOrderId').textContent = editingOrder.id;
                document.getElementById('editCustomerName').value = editingOrder.customerName;
                document.getElementById('editPhone').value = editingOrder.phone;
                
                if (editingOrder.wantsDelivery) {
                    document.getElementById('editDeliveryYes').checked = true;
                    document.getElementById('editDeliveryAddress').value = editingOrder.deliveryAddress;
                    document.getElementById('editDeliveryCost').value = editingOrder.deliveryCost;
                    document.getElementById('editDeliveryCost').disabled = false;
                } else {
                    document.getElementById('editDeliveryNo').checked = true;
                    document.getElementById('editDeliveryAddress').value = '';
                    document.getElementById('editDeliveryCost').value = '0';
                    document.getElementById('editDeliveryCost').disabled = true;
                }
                
                document.getElementById('editMantecados').value = editingOrder.products.mantecados.quantity;
                document.getElementById('editPanesillos').value = editingOrder.products.panesillos.quantity;
                document.getElementById('editPanesillosGrandes').value = editingOrder.products.panesillosGrandes.quantity;
                
                document.getElementById('editOrderDate').value = editingOrder.date;
                document.getElementById('editOrderTime').value = editingOrder.time;
                
                if (editingOrder.paymentMethod === 'cash') {
                    document.getElementById('editCash').checked = true;
                } else {
                    document.getElementById('editTransfer').checked = true;
                }
                
                document.getElementById('editStatus').value = editingOrder.status;
                document.getElementById('editTotalInput').value = editingOrder.total;
                
                recalculateEditTotal();
                
                document.getElementById('editModal').classList.remove('hidden');
            }
        }
        
        // Recalcular total en modal de edición
        function recalculateEditTotal() {
            const mantecadosQty = parseInt(document.getElementById('editMantecados').value) || 0;
            const panesillosQty = parseInt(document.getElementById('editPanesillos').value) || 0;
            const panesillosGrandesQty = parseInt(document.getElementById('editPanesillosGrandes').value) || 0;
            
            const wantsDelivery = document.getElementById('editDeliveryYes').checked;
            const deliveryCost = wantsDelivery ? (parseInt(document.getElementById('editDeliveryCost').value) || 0) : 0;
            const paymentMethod = document.querySelector('input[name="editPayment"]:checked').value;
            
            // NUEVOS PRECIOS SEGÚN CANTIDAD
            let mantecadosPrice = mantecadosQty >= 30 ? 25 : 35;
            let panesillosPrice = panesillosQty >= 50 ? 10 : 15;
            let panesillosGrandesPrice = panesillosGrandesQty >= 25 ? 20 : 25;
            
            const mantecadosSubtotal = mantecadosQty * mantecadosPrice;
            const panesillosSubtotal = panesillosQty * panesillosPrice;
            const panesillosGrandesSubtotal = panesillosGrandesQty * panesillosGrandesPrice;
            
            const productsTotal = mantecadosSubtotal + panesillosSubtotal + panesillosGrandesSubtotal;
            
            const transferCharge = paymentMethod === 'transfer' ? productsTotal * 0.1 : 0;
            
            const totalCalculated = productsTotal + transferCharge + deliveryCost;
            
            // Solo actualizar el total si no ha sido editado manualmente
            const totalInput = document.getElementById('editTotalInput');
            if (!totalInput.dataset.manualEdit) {
                totalInput.value = totalCalculated;
                totalInput.dataset.lastAutoValue = totalCalculated;
            }
            
            document.getElementById('editCalculationDetails').textContent = 
                `Productos: $${productsTotal} + Domicilio: $${deliveryCost} + Transferencia: $${transferCharge}`;
        }
        
        // Guardar cambios del pedido editado
        function saveEditedOrder() {
            if (!editingOrder) return;
            
            const orderIndex = orders.findIndex(o => o.id === editingOrder.id);
            
            if (orderIndex !== -1) {
                const mantecadosQty = parseInt(document.getElementById('editMantecados').value) || 0;
                const panesillosQty = parseInt(document.getElementById('editPanesillos').value) || 0;
                const panesillosGrandesQty = parseInt(document.getElementById('editPanesillosGrandes').value) || 0;
                
                const wantsDelivery = document.getElementById('editDeliveryYes').checked;
                const deliveryCost = wantsDelivery ? (parseInt(document.getElementById('editDeliveryCost').value) || 0) : 0;
                const deliveryAddress = wantsDelivery ? document.getElementById('editDeliveryAddress').value : '';
                const paymentMethod = document.querySelector('input[name="editPayment"]:checked').value;
                const total = parseFloat(document.getElementById('editTotalInput').value) || 0;
                
                // Liberar el horario anterior
                const oldDateTimeKey = `${editingOrder.date}-${editingOrder.time}`;
                delete bookedTimes[oldDateTimeKey];
                
                // Actualizar datos del pedido
                orders[orderIndex].customerName = document.getElementById('editCustomerName').value;
                orders[orderIndex].phone = document.getElementById('editPhone').value;
                orders[orderIndex].wantsDelivery = wantsDelivery;
                orders[orderIndex].deliveryAddress = deliveryAddress;
                orders[orderIndex].deliveryCost = deliveryCost;
                orders[orderIndex].date = document.getElementById('editOrderDate').value;
                orders[orderIndex].time = document.getElementById('editOrderTime').value;
                orders[orderIndex].paymentMethod = paymentMethod;
                orders[orderIndex].status = document.getElementById('editStatus').value;
                orders[orderIndex].total = total; // Usar el total editado manualmente
                
                // Calcular nuevos precios según cantidad (NUEVOS PRECIOS)
                let mantecadosPrice = mantecadosQty >= 30 ? 25 : 35;
                let panesillosPrice = panesillosQty >= 50 ? 10 : 15;
                let panesillosGrandesPrice = panesillosGrandesQty >= 25 ? 20 : 25;
                
                const mantecadosSubtotal = mantecadosQty * mantecadosPrice;
                const panesillosSubtotal = panesillosQty * panesillosPrice;
                const panesillosGrandesSubtotal = panesillosGrandesQty * panesillosGrandesPrice;
                
                const productsTotal = mantecadosSubtotal + panesillosSubtotal + panesillosGrandesSubtotal;
                const transferCharge = paymentMethod === 'transfer' ? productsTotal * 0.1 : 0;
                
                // Actualizar productos y totales (usar los precios calculados)
                orders[orderIndex].products.mantecados.quantity = mantecadosQty;
                orders[orderIndex].products.mantecados.price = mantecadosPrice;
                orders[orderIndex].products.mantecados.subtotal = mantecadosSubtotal;
                
                orders[orderIndex].products.panesillos.quantity = panesillosQty;
                orders[orderIndex].products.panesillos.price = panesillosPrice;
                orders[orderIndex].products.panesillos.subtotal = panesillosSubtotal;
                
                orders[orderIndex].products.panesillosGrandes.quantity = panesillosGrandesQty;
                orders[orderIndex].products.panesillosGrandes.price = panesillosGrandesPrice;
                orders[orderIndex].products.panesillosGrandes.subtotal = panesillosGrandesSubtotal;
                
                orders[orderIndex].productsTotal = productsTotal;
                orders[orderIndex].transferCharge = transferCharge;
                
                // Reservar nuevo horario
                const newDateTimeKey = `${orders[orderIndex].date}-${orders[orderIndex].time}`;
                bookedTimes[newDateTimeKey] = true;
                
                saveOrders();
                loadOrders();
                
                closeEditModal();
                
                showNotification(`Pedido #${editingOrder.id} actualizado correctamente. Nuevo total: $${total}`, 'success');
                
                editingOrder = null;
                selectedOrderId = null;
            }
        }
        
        // Cerrar modal de edición
        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
            const totalInput = document.getElementById('editTotalInput');
            delete totalInput.dataset.manualEdit;
            delete totalInput.dataset.lastAutoValue;
            editingOrder = null;
        }
        
        // Eliminar pedido
        function deleteOrder() {
            if (!selectedOrderId) {
                showNotification('Por favor seleccione un pedido.', 'warning');
                return;
            }
            
            if (confirm('¿Está seguro de eliminar este pedido? Esta acción no se puede deshacer.')) {
                const orderIndex = orders.findIndex(o => o.id === selectedOrderId);
                
                if (orderIndex !== -1) {
                    const order = orders[orderIndex];
                    const dateTimeKey = `${order.date}-${order.time}`;
                    delete bookedTimes[dateTimeKey];
                    
                    orders.splice(orderIndex, 1);
                    saveOrders();
                    loadOrders();
                    showNotification(`Pedido #${selectedOrderId} eliminado.`, 'success');
                    selectedOrderId = null;
                }
            }
        }
        
        // Guardar pedidos en localStorage
        function saveOrders() {
            localStorage.setItem('panaderiaArjonaOrders', JSON.stringify(orders));
            localStorage.setItem('panaderiaArjonaNextId', nextOrderId.toString());
        }
        
        // Mostrar notificación
        function showNotification(message, type = 'info') {
            const notificationContainer = document.getElementById('notificationContainer');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'error') icon = 'fa-exclamation-circle';
            if (type === 'warning') icon = 'fa-exclamation-triangle';
            
            notification.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;
            
            notificationContainer.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
    </script>
</body>
</html>